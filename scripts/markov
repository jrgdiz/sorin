#! /usr/bin/env python3
# -*- coding: utf-8 -*-

import io
import sys
from Markov import Markov

corpus = []

with io.TextIOWrapper(sys.stdin.buffer, encoding='utf-8') as fi:
	corpus = [l.split() for l in fi if l.strip()]

try:
	maxlen = int(sys.argv[1])
except (ValueError, IndexError):
	maxlen = 140

m = Markov(corpus=corpus, odds=[1])
g = m.linearize(m.generate(maxlen))

print(g)
